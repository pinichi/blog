import q from"./ContentRendererMarkdown.a5933593.js";import D from"./ContentRenderer.3f6a6670.js";import{d as E,o as n,q as o,$,a0 as k,Y as u,p as f,Z as A,R as P,P as I,a1 as M,A as p,J as O,D as R,c as V,O as B,E as S,e as F,a2 as j,a as l,X as z,a3 as H}from"./entry.8c35f535.js";import{u as J,q as L}from"./query.006323d0.js";import{_ as U}from"./nuxt-link.5cd13add.js";import"./index.a6ef77ff.js";import"./preview.e2d9d6d7.js";import"./utils.02174b5e.js";const X={class:"sticky top-20 max-w-[240px]"},Y={key:0,class:"border-l"},Z=E({__name:"TableOfContents",props:{contents:null,activeId:null},setup(d){const a=d;return(_,h)=>{const i=U;return n(),o("div",X,[(n(!0),o($,null,k(a.contents.links,e=>(n(),o("li",{key:e.id,class:"flex flex-col"},[u(i,{prefetch:"",class:I([e.id===d.activeId?"text-lime-800 font-bold":"","break-words text-lg"]),to:`#${e.id}`},{default:f(()=>[A(P(e.text),1)]),_:2},1032,["class","to"]),e.children&&e.children.length>0?(n(),o("ul",Y,[(n(!0),o($,null,k(e.children,r=>(n(),o("li",{key:r.id,class:"pl-2"},[u(i,{class:I([r.id===d.activeId?"text-lime-800 font-bold border-lime-800":"","break-words"]),to:`#${r.id}`},{default:f(()=>[A(P(r.text),1)]),_:2},1032,["class","to"])]))),128))])):M("",!0)]))),128))])}}}),G={key:0,class:"flex w-full p-4 sm:p-6 md:p-8"},K={class:"hidden lg:block flex-shrink-0 relative pl-6"},re=E({__name:"[slug]",async setup(d){var v,x,g,b,w,y,C;let a,_;const h=p(null),i=p(""),e=p(null);O(()=>{e.value=new IntersectionObserver(s=>{s.forEach(c=>{if(c.isIntersecting){const m=c.target.getAttribute("id");m&&(i.value=m)}})},{rootMargin:"0px 0px -90% 0px",threshold:0}),document.querySelectorAll(".article-content h2[id], .article-content h3[id]").forEach(s=>{var c;(c=e.value)==null||c.observe(s)})}),R(()=>{var s;(s=e.value)==null||s.disconnect()});const r=V(),{data:t,error:N}=([a,_]=B(async()=>J("article",async()=>{try{return await L("/article").where({_id:`content:article:${r.params.slug}.md`}).findOne()}catch{H({message:"Page not found",statusCode:404})}})),a=await a,_(),a);if(N.value)throw S({statusCode:404,statusMessage:"Page Not Found"});return F({titleTemplate:(v=t.value)!=null&&v.title?`Pinichi | ${(x=t.value)==null?void 0:x.title}`:"Pinichi | Article"}),j({title:((g=t.value)==null?void 0:g.title)??"Pinichi | Article",ogTitle:((b=t.value)==null?void 0:b.title)??"Pinichi | Article",ogImage:((w=t.value)==null?void 0:w.coverImage)??"https://user-images.githubusercontent.com/19923534/235397317-bcc0948b-4609-4bde-9fb8-82df94aacc8c.jpg",description:((y=t.value)==null?void 0:y.description)??"Pinichi의 블로그입니다.",ogDescription:((C=t.value)==null?void 0:C.description)??"Pinichi의 블로그입니다."}),(s,c)=>{const m=q,T=D;return l(t)?(n(),o("div",G,[u(T,{ref_key:"nuxtContent",ref:h,class:"flex-grow",value:l(t)},{default:f(()=>[u(m,{value:l(t),class:"article-content prose max-w-none min-w-0"},null,8,["value"])]),_:1},8,["value"]),z("div",K,[u(Z,{contents:l(t).body.toc,"active-id":l(i)},null,8,["contents","active-id"])])])):M("",!0)}}});export{re as default};
