import T from"./ContentRendererMarkdown.e79efe0f.js";import q from"./ContentRenderer.0403532e.js";import{d as E,o as s,q as o,$ as C,a0 as $,Y as u,p as f,Z as k,R as A,P,a1 as I,A as p,J as D,D as O,c as R,O as V,E as B,e as S,a2 as F,a as l,X as z,a3 as H}from"./entry.3fa8ef29.js";import{u as J,q as L}from"./query.0f16690b.js";import{_ as U}from"./nuxt-link.a766583c.js";import"./index.a6ef77ff.js";import"./preview.6c692ae1.js";import"./utils.7b73a8f4.js";const X={class:"sticky top-20 max-w-[240px]"},Y={key:0,class:"border-l"},Z=E({__name:"TableOfContents",props:{contents:null,activeId:null},setup(d){const a=d;return(_,h)=>{const i=U;return s(),o("div",X,[(s(!0),o(C,null,$(a.contents.links,e=>(s(),o("li",{key:e.id,class:"flex flex-col"},[u(i,{prefetch:"",class:P([e.id===d.activeId?"text-lime-800 font-bold":"","break-words text-lg"]),to:`#${e.id}`},{default:f(()=>[k(A(e.text),1)]),_:2},1032,["class","to"]),e.children&&e.children.length>0?(s(),o("ul",Y,[(s(!0),o(C,null,$(e.children,r=>(s(),o("li",{key:r.id,class:"pl-2"},[u(i,{class:P([r.id===d.activeId?"text-lime-800 font-bold border-lime-800":"","break-words"]),to:`#${r.id}`},{default:f(()=>[k(A(r.text),1)]),_:2},1032,["class","to"])]))),128))])):I("",!0)]))),128))])}}}),j={key:0,class:"flex w-full p-4 sm:p-6 md:p-8"},G={class:"hidden lg:block flex-shrink-0 relative pl-6"},ae=E({__name:"[slug]",async setup(d){var v,x,g,w,y,b;let a,_;const h=p(null),i=p(""),e=p(null);D(()=>{e.value=new IntersectionObserver(n=>{n.forEach(c=>{if(c.isIntersecting){const m=c.target.getAttribute("id");m&&(i.value=m)}})},{rootMargin:"0px 0px -90% 0px",threshold:0}),document.querySelectorAll(".article-content h2[id], .article-content h3[id]").forEach(n=>{var c;(c=e.value)==null||c.observe(n)})}),O(()=>{var n;(n=e.value)==null||n.disconnect()});const r=R(),{data:t,error:M}=([a,_]=V(async()=>J("article",async()=>{try{return await L("/article").where({_id:`content:article:${r.params.slug}.md`}).findOne()}catch{H({message:"Page not found",statusCode:404})}})),a=await a,_(),a);if(M.value)throw B({statusCode:404,statusMessage:"Page Not Found"});return S({titleTemplate:(v=t.value)!=null&&v.title?`Pinichi | ${(x=t.value)==null?void 0:x.title}`:"Pinichi | Article"}),F({title:((g=t.value)==null?void 0:g.title)??"Pinichi | Article",ogTitle:((w=t.value)==null?void 0:w.title)??"Pinichi | Article",description:((y=t.value)==null?void 0:y.description)??"Pinichi의 블로그입니다.",ogDescription:((b=t.value)==null?void 0:b.description)??"Pinichi의 블로그입니다."}),(n,c)=>{const m=T,N=q;return l(t)?(s(),o("div",j,[u(N,{ref_key:"nuxtContent",ref:h,class:"flex-grow",value:l(t)},{default:f(()=>[u(m,{value:l(t),class:"article-content prose max-w-none min-w-0"},null,8,["value"])]),_:1},8,["value"]),z("div",G,[u(Z,{contents:l(t).body.toc,"active-id":l(i)},null,8,["contents","active-id"])])])):I("",!0)}}});export{ae as default};
