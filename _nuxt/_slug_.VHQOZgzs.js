import{_ as R}from"./ContentRendererMarkdown.vue.PN1YCfdL.js";import V from"./ContentRenderer.rA82V3an.js";import{d as E,o as n,c as o,F as k,r as A,a as d,w as _,t as P,b as $,n as I,e as M,f as p,g as q,h as B,u as D,i as F,j as O,k as S,l as j,m as u,p as z,s as H}from"./entry.i_vwCSNo.js";import{u as L,q as U}from"./query.-6ueymVA.js";import{_ as G}from"./nuxt-link.FLUBGROs.js";import"./index.1dSrIji7.js";import"./preview.EikZZcTx.js";const J={class:"sticky top-20 max-w-[240px]"},K={key:0,class:"border-l"},Q=E({__name:"TableOfContents",props:{contents:{},activeId:{}},setup(f){const a=f;return(i,h)=>{const l=G;return n(),o("div",J,[(n(!0),o(k,null,A(a.contents.links,e=>(n(),o("li",{key:e.id,class:"flex flex-col"},[d(l,{prefetch:"",class:I([e.id===i.activeId?"text-lime-800 font-bold":"","break-words text-lg"]),to:`#${e.id}`},{default:_(()=>[$(P(e.text),1)]),_:2},1032,["class","to"]),e.children&&e.children.length>0?(n(),o("ul",K,[(n(!0),o(k,null,A(e.children,r=>(n(),o("li",{key:r.id,class:"pl-2"},[d(l,{class:I([r.id===i.activeId?"text-lime-800 font-bold border-lime-800":"","break-words"]),to:`#${r.id}`},{default:_(()=>[$(P(r.text),1)]),_:2},1032,["class","to"])]))),128))])):M("",!0)]))),128))])}}}),W={key:0,class:"flex w-full p-4 sm:p-6 md:p-8"},X={class:"hidden lg:block flex-shrink-0 relative pl-6"},ae=E({__name:"[slug]",async setup(f){var v,g,x,b,w,y,C;let a,i;const h=p(null),l=p(""),e=p(null);q(()=>{e.value=new IntersectionObserver(s=>{s.forEach(c=>{if(c.isIntersecting){const m=c.target.getAttribute("id");m&&(l.value=m)}})},{rootMargin:"0px 0px -90% 0px",threshold:0}),document.querySelectorAll(".article-content h2[id], .article-content h3[id]").forEach(s=>{var c;(c=e.value)==null||c.observe(s)})}),B(()=>{var s;(s=e.value)==null||s.disconnect()});const r=D(),{data:t,error:N}=([a,i]=F(async()=>L("article",async()=>{try{return await U("/article").where({_id:`content:article:${r.params.slug}.md`}).findOne()}catch{H({message:"Page not found",statusCode:404})}})),a=await a,i(),a);if(N.value)throw O({statusCode:404,statusMessage:"Page Not Found"});return S({titleTemplate:(v=t.value)!=null&&v.title?`Pinichi | ${(g=t.value)==null?void 0:g.title}`:"Pinichi | Article"}),j({title:((x=t.value)==null?void 0:x.title)??"Pinichi | Article",ogTitle:((b=t.value)==null?void 0:b.title)??"Pinichi | Article",ogImage:((w=t.value)==null?void 0:w.coverImage)??"https://user-images.githubusercontent.com/19923534/235397317-bcc0948b-4609-4bde-9fb8-82df94aacc8c.jpg",description:((y=t.value)==null?void 0:y.description)??"Pinichi의 블로그입니다.",ogDescription:((C=t.value)==null?void 0:C.description)??"Pinichi의 블로그입니다."}),(s,c)=>{const m=R,T=V;return u(t)?(n(),o("div",W,[d(T,{ref_key:"nuxtContent",ref:h,class:"flex-grow",value:u(t)},{default:_(()=>[d(m,{value:u(t),class:"article-content prose max-w-none min-w-0"},null,8,["value"])]),_:1},8,["value"]),z("div",X,[d(Q,{contents:u(t).body.toc,"active-id":u(l)},null,8,["contents","active-id"])])])):M("",!0)}}});export{ae as default};
